{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\norar\\\\fullstackopen-2019\\\\blogilista-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\norar\\\\fullstackopen-2019\\\\blogilista-front\\\\src\\\\App.js\";\nimport React from 'react';\nimport './index.css';\nimport Blog from './components/Blog';\nimport { useState, useEffect } from 'react';\nimport lista from './services/blogservice';\nimport loginService from './services/login';\n\nconst App = () => {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        username = _useState2[0],\n        addusername = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        addpassword = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        errorMessage = _useState6[0],\n        setErrorMessage = _useState6[1];\n\n  const _useState7 = useState(null),\n        _useState8 = _slicedToArray(_useState7, 2),\n        user = _useState8[0],\n        setuser = _useState8[1];\n\n  const handleLogin = async event => {\n    event.preventDefault();\n\n    try {\n      const user = await loginService.login({\n        username,\n        password\n      });\n      blogService.setToken(user.token);\n      setuser(user);\n      addusername('');\n      addpassword('');\n    } catch (exception) {\n      setErrorMessage('Tarkista kirjautumistiedot');\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 5000);\n    }\n  };\n\n  const _useState9 = useState([]),\n        _useState10 = _slicedToArray(_useState9, 2),\n        blogs = _useState10[0],\n        addblogs = _useState10[1];\n\n  useEffect(() => {\n    lista.getAll().then(blogi => addblogs(blogi));\n  }, []);\n\n  const loginForm = () => React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Log in to application\"), React.createElement(\"form\", {\n    onSubmit: handleLogin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"Name:       \", React.createElement(\"input\", {\n    value: username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), \"Password:   \", React.createElement(\"input\", {\n    value: password,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"Sign in\")));\n\n  const bloglist = () => React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Blogs\"), blogs.map(blog => React.createElement(Blog, {\n    key: blog.id,\n    blog: blog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  })));\n\n  if (user === null) {\n    return React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Blogit\"), user === null ? loginForm() : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, user.name, \" logged in\"), bloglist()));\n  }\n};\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\norar\\fullstackopen-2019\\blogilista-front\\src\\App.js"],"names":["React","Blog","useState","useEffect","lista","loginService","App","username","addusername","password","addpassword","errorMessage","setErrorMessage","user","setuser","handleLogin","event","preventDefault","login","blogService","setToken","token","exception","setTimeout","blogs","addblogs","getAll","then","blogi","loginForm","bloglist","map","blog","id","name"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './index.css';\nimport Blog from './components/Blog';\nimport {useState, useEffect} from 'react';\nimport lista from './services/blogservice'\nimport loginService from './services/login'\n\nconst App =()=> {\n\nconst [username, addusername]=useState('')\nconst [password, addpassword]=useState('')\nconst [errorMessage, setErrorMessage] = useState(null)\nconst [user, setuser]=useState(null)\n  \nconst handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password,\n      })\n      blogService.setToken(user.token)\n      setuser(user)\n      addusername('')\n      addpassword('')\n    } catch (exception) {\n      setErrorMessage('Tarkista kirjautumistiedot')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  } \n\nconst [blogs, addblogs] =useState([])\n  useEffect(() => {\n   lista\n    .getAll()\n     .then(blogi=>\n      addblogs(blogi))\n    }, [])\n\n  const loginForm =()=> (\n      <div>\n        <h2>Log in to application</h2>\n        <form onSubmit={handleLogin}>\n          Name:       <input value={username}/>\n          <br/>\n          Password:   <input value={password}/>\n          <br/>\n          <button type=\"submit\">Sign in</button>\n        </form>\n      </div>\n  )\n\n  const bloglist=()=>(\n      <div>\n        <h2>Blogs</h2>\n        {blogs.map(blog =>\n          <Blog key={blog.id} blog={blog} />\n        )}\n      </div>\n    )\n\n  if (user === null) {\n    return (\n      <><h1>Blogit</h1>\n      {user === null ?\n        loginForm() :\n        <div>\n          <p>{user.name} logged in</p>\n          {bloglist()}\n        </div>\n      }</>\n    )}\n  \n\n \n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}